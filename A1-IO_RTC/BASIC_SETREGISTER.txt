;SET REGISTER
;	Requirements: PCB v0.94c, ATMEGA32 FW v0.94c
;	VIA Base Address = $2000 (8192 DECIMAL)
;
;	register 0 = hours
; 	register 1 = minutes
; 	register 2 = seconds
; 	register 3 = day
; 	register 4 = month
; 	register 5 = year (2 digits)
; 	other functions will be added in the future
;	USE ONLY TO SET RTC (parameters above)
;

5 INPUT "REGISTER",A 			:REM INPUT REGISTER ADDRESS (0..32, NOW SUPPORTED ONLY 0..5)
6 INPUT "DATA",D 			:REM INPUT DESIRED DATA VALUE (0..255)
10 POKE 8194,255 			:REM SET ALL PORTB PINS TO OUTPUT BY POKING DDRB
20 POKE 8195,255 			:REM SET ALL PORTA PINS TO OUTPUT BY POKING DDRA
70 POKE 8192,A 				:REM SET ORB WITH REGISTER ADDRESS
80 POKE 8193,D 				:REM SET ORA WITH DATA VALUE
90 PRINT "WRITING..."
100 POKE 8193,A+64 			:REM SET ORA BIT 1 (RW) TO HIGH, ATMEGA32 WILL READ IT AND SET REGISTER WITH DATA VALUE
110 PRINT "DONE."
115 POKE 8193,0 			:REM ZERO ORA (WRITING COMPLETED)
120 POKE 8194,0: POKE 8195,64 		:REM SET ALL PORTB TO INPUT, SET ALL PORTA TO INPUT EXCEPT BIT 6 (RW)
999 END
